#!/bin/bash

set -euo pipefail

# load env vars
if [ -f .env ]
then
  export $(cat .env | sed 's/#.*//g' | xargs)
fi

function help() {
echo
echo "A sheet task runner."
echo
}

function find() {
    bat --style plain --theme GitHub ~/.sheets/$(ls ~/.sheets | fzf --preview 'bat --style=numbers  ~/.sheets/{}')
}

function list() {
    ls -1 ~/.sheets
}

case "$1" in
    find)
        find
        ;;
    list)
        list
        ;;
    edit)
        $EDITOR ~/.sheets/$2
        ;;
    *)
        help task
        exit 1
esac